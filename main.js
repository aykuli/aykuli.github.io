/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/app.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/app.js":
/*!********************!*\
  !*** ./src/app.js ***!
  \********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _sass_style_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./sass/style.scss */ \"./src/sass/style.scss\");\n/* harmony import */ var _sass_style_scss__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_sass_style_scss__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _components_drawCanvas_drawCanvas__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./components/drawCanvas/drawCanvas */ \"./src/components/drawCanvas/drawCanvas.js\");\n/* harmony import */ var _components_appAction_appAction__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./components/appAction/appAction */ \"./src/components/appAction/appAction.js\");\n/* harmony import */ var _components_Controller_Controller__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./components/Controller/Controller */ \"./src/components/Controller/Controller.js\");\n/* harmony import */ var _components_View_View__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components/View/View */ \"./src/components/View/View.js\");\n\n\n\n\n // optins = [pixelSize, currentCount, fps, penSize, piskelImg]\n\nvar options = [1, 0, 12, 1, []];\nvar app = new _components_Controller_Controller__WEBPACK_IMPORTED_MODULE_3__[\"default\"](new _components_View_View__WEBPACK_IMPORTED_MODULE_4__[\"default\"](), options);\n\n//# sourceURL=webpack:///./src/app.js?");

/***/ }),

/***/ "./src/components/Controller/Controller.js":
/*!*************************************************!*\
  !*** ./src/components/Controller/Controller.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Controller; });\n/* harmony import */ var _tools_Tools__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../tools/Tools */ \"./src/components/tools/Tools.js\");\n/* harmony import */ var _tools_toolsMap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../tools/toolsMap */ \"./src/components/tools/toolsMap.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils */ \"./src/components/utils.js\");\n/* harmony import */ var _frames_frame__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../frames/frame */ \"./src/components/frames/frame.js\");\n/* harmony import */ var _animation_animate__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../animation/animate */ \"./src/components/animation/animate.js\");\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\n\n\nvar Controller =\n/*#__PURE__*/\nfunction () {\n  function Controller(view, options) {\n    var _this = this;\n\n    _classCallCheck(this, Controller);\n\n    this.view = view;\n\n    var _options = _slicedToArray(options, 5);\n\n    this.pixelSize = _options[0];\n    this.currentCount = _options[1];\n    this.fps = _options[2];\n    this.penSize = _options[3];\n    this.piskelImg = _options[4];\n    this.swapWatch(); // color swap eventListener\n\n    this.canvasResolutioWatch();\n    this.canvasSizeWatch();\n    this.tools = new _tools_Tools__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.view.canvas, this.view.ctx, this.view.primaryColor, this.pixelSize);\n    this.init();\n    this.paintTools(); // tools eventListener\n\n    this.keyboardShortCutHandler(); // keyboard eventListener\n\n    this.frameWatch(); // frame active eventListener\n\n    this.penSizes(); // pen size eventListener\n\n    this.cursorOnCanvas();\n    this.framesScroll();\n    Object(_frames_frame__WEBPACK_IMPORTED_MODULE_3__[\"frameDndHandler\"])(this.view.canvas, this.piskelImg, _frames_frame__WEBPACK_IMPORTED_MODULE_3__[\"frameDatasetCountSet\"], _frames_frame__WEBPACK_IMPORTED_MODULE_3__[\"drawOnCanvas\"]); // frame drag and drop listener\n\n    Object(_animation_animate__WEBPACK_IMPORTED_MODULE_4__[\"animate\"])(function (i) {\n      Object(_frames_frame__WEBPACK_IMPORTED_MODULE_3__[\"drawOnCanvas\"])(_this.view.preview, _this.piskelImg[i]);\n    }, this.view.fps, this.view.fpsValue, this.piskelImg);\n    this.clearSession();\n    Object(_animation_animate__WEBPACK_IMPORTED_MODULE_4__[\"animationFullscreen\"])(this.view.fullscreenBtn, this.view.preview);\n  }\n\n  _createClass(Controller, [{\n    key: \"init\",\n    value: function init() {\n      var _this2 = this;\n\n      var lSCount = localStorage.getItem('piskelCounter');\n      this.currentCount = lSCount !== null && lSCount !== 'undefined' ? lSCount : this.currentCount; // get image from Local Storage if exists\n\n      if (localStorage.getItem('piskelImg') !== null) {\n        this.piskelImg = JSON.parse(localStorage.getItem('piskelImg'));\n        this.view.renderFrames(this.piskelImg, this.currentCount);\n\n        for (var i = 0; i < this.piskelImg.length; i++) {\n          var frame = this.view.framesList.children[i].children[0];\n          Object(_frames_frame__WEBPACK_IMPORTED_MODULE_3__[\"drawOnCanvas\"])(frame, this.piskelImg[i]);\n        }\n\n        Object(_frames_frame__WEBPACK_IMPORTED_MODULE_3__[\"drawOnCanvas\"])(this.view.canvas, this.piskelImg[this.currentCount]);\n      } else {\n        this.view.renderFrameActive(0, this.piskelImg, this.view.framesList);\n      } // get user fps from localStorage\n\n\n      if (localStorage.getItem('piskelFps') !== null) {\n        this.fps = localStorage.getItem('piskelFps');\n        this.view.fps.value = +localStorage.getItem('piskelFps');\n      } else {\n        this.fps = this.view.fps.value;\n        localStorage.setItem('piskelFps', this.fps);\n      }\n\n      this.view.fpsValue.innerText = localStorage.getItem('piskelFps');\n\n      if (+this.fps === 0 || this.piskelImg.length !== 0) {\n        Object(_frames_frame__WEBPACK_IMPORTED_MODULE_3__[\"drawOnCanvas\"])(this.view.preview, this.piskelImg[this.currentCount]);\n      } else {\n        Object(_animation_animate__WEBPACK_IMPORTED_MODULE_4__[\"animate\"])(function (i) {\n          Object(_frames_frame__WEBPACK_IMPORTED_MODULE_3__[\"drawOnCanvas\"])(_this2.view.preview, _this2.piskelImg[i]);\n        }, this.view.fps, this.view.fpsValue, this.piskelImg);\n      }\n    }\n  }, {\n    key: \"framesScroll\",\n    value: function framesScroll() {\n      // document.body.style.overflow = 'hidden';\n      console.log('\\ndocument.body.scrollHeight: ', document.body.scrollHeight, '\\ndocument.documentElement.scrollHeight: ', document.documentElement.scrollHeight, '\\ndocument.body.offsetHeight: ', document.body.offsetHeight, '\\ndocument.documentElement.offsetHeight: ', document.documentElement.offsetHeight, '\\ndocument.body.clientHeight: ', document.body.clientHeight, '\\ndocument.documentElement.clientHeight: ', document.documentElement.clientHeight);\n      var sLeft = this.view.framesList.scrollBottom;\n\n      if (this.view.framesList.clientHeight > document.body.clientHeight) {\n        console.log('ono');\n        this.view.framesList.style.overflowY = 'auto';\n        this.view.framesList.style.overflowX = 'hidden';\n      } // console.log(this.view.framesList.clientHeight);\n\n    }\n  }, {\n    key: \"canvasSizeWatch\",\n    value: function canvasSizeWatch() {\n      var _this3 = this;\n\n      // set pixel size at app page loading\n      if (localStorage.getItem('piskelPixelSize') !== null) {\n        this.pixelSize = Number(localStorage.getItem('piskelPixelSize'));\n        var target = document.querySelector(\".resolution--res\".concat(this.view.canvas.width / this.pixelSize));\n        this.view.highlightTarget(target, 'resolution__btn--active');\n      }\n\n      this.view.setCanvasWrapSize();\n      window.addEventListener('resize', function (e) {\n        _this3.view.setCanvasWrapSize();\n      });\n    }\n  }, {\n    key: \"canvasResolutioWatch\",\n    value: function canvasResolutioWatch() {\n      var _this4 = this;\n\n      this.view.resBtns.addEventListener('click', function (e) {\n        if (e.target.tagName === 'BUTTON') {\n          _this4.pixelSize = _this4.view.canvas.width / e.target.dataset.size;\n\n          _this4.view.highlightTarget(e.target, 'resolution__btn--active');\n\n          localStorage.removeItem('piskelPixelSize');\n          localStorage.setItem('piskelPixelSize', _this4.pixelSize);\n          Object(_frames_frame__WEBPACK_IMPORTED_MODULE_3__[\"drawOnCanvas\"])(_this4.view.canvas, _this4.piskelImg[_this4.currentCount]);\n        }\n      });\n    }\n  }, {\n    key: \"frameWatch\",\n    value: function frameWatch() {\n      var _this5 = this;\n\n      this.view.framesList.addEventListener('click', function (e) {\n        if (e.target.className.includes('frame__btn--delete')) {\n          console.log('до this.currentCount: ', _this5.currentCount);\n          _this5.currentCount = Object(_frames_frame__WEBPACK_IMPORTED_MODULE_3__[\"frameDel\"])(e.target, _this5.piskelImg, _this5.view.canvas, _this5.view.framesList);\n          console.log('после this.currentCount: ', _this5.currentCount);\n        } else if (e.target.className.includes('frame__btn--copy')) {\n          _this5.currentCount = Object(_frames_frame__WEBPACK_IMPORTED_MODULE_3__[\"frameCopy\"])(e.target, _this5.piskelImg, _this5.view.canvas, _this5.view.highlightTarget, _frames_frame__WEBPACK_IMPORTED_MODULE_3__[\"frameDatasetCountSet\"], _frames_frame__WEBPACK_IMPORTED_MODULE_3__[\"drawOnCanvas\"]);\n        } else {\n          _this5.currentCount = Object(_frames_frame__WEBPACK_IMPORTED_MODULE_3__[\"frameHandler\"])(e, _this5.view.canvas, _this5.piskelImg, _frames_frame__WEBPACK_IMPORTED_MODULE_3__[\"drawOnCanvas\"], _this5.view.preview, _this5.fps);\n        }\n\n        localStorage.removeItem('piskelImg');\n        localStorage.setItem('piskelImg', JSON.stringify(_this5.piskelImg));\n        localStorage.removeItem('piskelCounter');\n        localStorage.setItem('piskelCounter', _this5.currentCount);\n      });\n      this.view.frameAddBtn.addEventListener('click', function () {\n        Object(_frames_frame__WEBPACK_IMPORTED_MODULE_3__[\"frameAdd\"])(_this5.view.renderFrameActive, _this5.view.framesList, _this5.view.canvas, _this5.piskelImg);\n        _this5.currentCount = +localStorage.getItem('piskelCounter');\n      });\n      this.view.canvas.addEventListener('mouseup', function () {\n        Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"saveImgsInLocalStorage\"])(_this5.piskelImg, _this5.view.canvas, _this5.currentCount);\n        Object(_frames_frame__WEBPACK_IMPORTED_MODULE_3__[\"frameDraw\"])(_this5.piskelImg, _this5.currentCount);\n      }); // this.view.canvas.addEventListener('mouseleave', () => {\n      //   // console.log('mouseLeave');\n      //   // console.log(this.piskelImg, this.view.canvas, this.currentCount);\n      //   saveImgsInLocalStorage(this.piskelImg, this.view.canvas, this.currentCount);\n      //   frameDraw(this.piskelImg, this.currentCount);\n      // });\n    }\n  }, {\n    key: \"swapWatch\",\n    value: function swapWatch() {\n      var _this6 = this;\n\n      // set swaper color at app loading or\n      // get user colors from Local Storage if exists\n      if (localStorage.getItem('piskelPrimaryColor') !== null) {\n        this.view.primaryColor.value = localStorage.getItem('piskelPrimaryColor');\n      } else {\n        localStorage.setItem('piskelPrimaryColor', this.view.primaryColor.value);\n      }\n\n      if (localStorage.getItem('piskelSecondaryColor') !== null) {\n        this.view.secondaryColor.value = localStorage.getItem('piskelSecondaryColor');\n      } else {\n        localStorage.setItem('piskelSecondaryColor', this.view.secondaryColor.value);\n      }\n\n      this.view.swapColor.addEventListener('click', this.swapHandler.bind(this));\n      this.view.primaryColor.addEventListener('change', function () {\n        localStorage.removeItem('piskelPrimaryColor');\n        localStorage.setItem('piskelPrimaryColor', _this6.view.primaryColor.value);\n      });\n      this.view.secondaryColor.addEventListener('change', function () {\n        localStorage.removeItem('piskelSecondaryColor');\n        localStorage.setItem('piskelSecondaryColor', _this6.view.secondaryColor.value);\n      });\n    }\n  }, {\n    key: \"swapHandler\",\n    value: function swapHandler() {\n      var buf = this.view.primaryColor.value;\n      this.view.primaryColor.value = this.view.secondaryColor.value;\n      this.view.secondaryColor.value = buf;\n      this.view.ctx.fillStyle = this.view.primaryColor.value;\n      localStorage.removeItem('piskelPrimaryColor');\n      localStorage.setItem('piskelPrimaryColor', this.view.primaryColor.value);\n      localStorage.removeItem('piskelSecondaryColor');\n      localStorage.setItem('piskelSecondaryColor', this.view.secondaryColor.value);\n    }\n  }, {\n    key: \"paintTools\",\n    value: function paintTools() {\n      var _this7 = this;\n\n      // get drawing tool from Local Storage if exists\n      if (localStorage.getItem('piskelTool') === null) {\n        this.targetTool = 'pencil';\n        this.tools.pencilTool(this.targetTool);\n        localStorage.setItem('piskelTool', this.targetTool);\n      } else {\n        this.targetTool = localStorage.getItem('piskelTool');\n        this.view.highlightTarget(document.querySelector(\"#\".concat(this.targetTool)), 'tool--active');\n        this.tools.toolHandler(this.targetTool, _frames_frame__WEBPACK_IMPORTED_MODULE_3__[\"frameDraw\"]);\n      }\n\n      this.view.tools.addEventListener('click', function (e) {\n        var targetToolEl = e.target.closest('li');\n        if (targetToolEl === null) return;\n        _this7.targetTool = targetToolEl.id;\n\n        switch (_this7.targetTool) {\n          case 'empty':\n            _this7.tools.clearCanvas(_this7.piskelImg, _this7.currentCount);\n\n            Object(_frames_frame__WEBPACK_IMPORTED_MODULE_3__[\"frameDraw\"])(_this7.piskelImg, _this7.currentCount);\n            break;\n\n          default:\n            _this7.view.highlightTarget(document.querySelector(\"#\".concat(_this7.targetTool)), 'tool--active');\n\n            _this7.tools.toolHandler(_this7.targetTool, _frames_frame__WEBPACK_IMPORTED_MODULE_3__[\"frameDraw\"]);\n\n        }\n      });\n    }\n  }, {\n    key: \"penSizes\",\n    value: function penSizes() {\n      var _this8 = this;\n\n      // get pen size from local|Storage when app loaded\n      if (localStorage.getItem('piskelPenSize') !== null) {\n        this.pixelSize = Number(localStorage.getItem('piskelPenSize'));\n        this.penSize = localStorage.getItem('piskelPenSize');\n\n        for (var i = 0; i < this.view.penSizes.children.length; i++) {\n          if (this.view.penSizes.children[i].dataset.size === this.penSize) {\n            this.view.highlightTarget(this.view.penSizes.children[i], 'pen-size--active');\n          }\n        }\n      }\n\n      this.view.penSizes.addEventListener('click', function (e) {\n        if (e.target.tagName === 'LI') {\n          _this8.view.highlightTarget(e.target, 'pen-size--active');\n\n          _this8.penSize = e.target.dataset.size;\n          localStorage.removeItem('piskelPenSize');\n          localStorage.setItem('piskelPenSize', _this8.penSize);\n        }\n      });\n    }\n  }, {\n    key: \"keyboardShortCutHandler\",\n    value: function keyboardShortCutHandler() {\n      var _this9 = this;\n\n      document.addEventListener('keydown', function (e) {\n        _this9.targetTool = _tools_toolsMap__WEBPACK_IMPORTED_MODULE_1__[\"toolsMap\"].has(e.code) ? _tools_toolsMap__WEBPACK_IMPORTED_MODULE_1__[\"toolsMap\"].get(e.code) : _this9.targetTool;\n\n        if (e.code === 'KeyZ') {\n          e.preventDefault();\n\n          _this9.tools.clearCanvas(_this9.piskelImg, _this9.currentCount);\n\n          Object(_frames_frame__WEBPACK_IMPORTED_MODULE_3__[\"frameDraw\"])(_this9.piskelImg, _this9.currentCount);\n        } else if (e.code === 'KeyX') {\n          e.preventDefault();\n\n          _this9.swapHandler();\n        }\n\n        if (_this9.targetTool !== 'empty') {\n          _this9.view.highlightTarget(document.querySelector(\"#\".concat(_this9.targetTool)), 'tool--active');\n\n          _this9.tools.toolHandler(_this9.targetTool, _frames_frame__WEBPACK_IMPORTED_MODULE_3__[\"frameDraw\"]);\n        }\n      });\n    }\n  }, {\n    key: \"cursorOnCanvas\",\n    value: function cursorOnCanvas() {// this.view.canvas.addEventListener('mousemove', e => {\n      //   if (!this.tools.isDrawing) {\n      //     // console.log(this.tools.isDrawing);\n      //     // console.log('this.view.canvas.addEventListener(mousemove)');\n      //     // console.log(e.offsetX);\n      //     // console.log(this.view.canvas.parentNode.style.width);\n      //     const penSize = localStorage.getItem('piskelPenSize') !== null ? +localStorage.getItem('piskelPenSize') : 1;\n      //     const pixelSize =\n      //       localStorage.getItem('piskelPixelSize') !== null ? +localStorage.getItem('piskelPixelSize') : 1;\n      //     const scale = this.view.canvas.parentNode.style.width.slice(0, -2) / this.view.canvas.width;\n      //     console.log('scale: ', scale);\n      //     this.view.cursor.style.width = `${penSize * pixelSize * scale}px`;\n      //     this.view.cursor.style.height = `${penSize * pixelSize * scale}px`;\n      //     const x = Math.round(e.offsetX / pixelSize) * pixelSize;\n      //     const y = Math.round(e.offsetY / pixelSize) * pixelSize;\n      //     this.view.cursor.style.top = `${y - (penSize * pixelSize * scale) / 2}px`;\n      //     this.view.cursor.style.left = `${x - (penSize * pixelSize * scale) / 2}px`;\n      //   }\n      // });\n      // this.view.cursor.addEventListener('click', () => {\n      //   console.log('click on cursor');\n      //   this.tools.isDrawing = true;\n      //   this.view.cursor.style.width = 0;\n      //   this.view.cursor.style.height = 0;\n      // });\n    }\n  }, {\n    key: \"clearSession\",\n    value: function clearSession() {\n      this.view.clearSessionBtn.addEventListener('click', function () {\n        console.log('clear');\n        localStorage.removeItem('piskelImg');\n        localStorage.removeItem('piskelPrimaryColor');\n        localStorage.removeItem('piskelSecondaryColor');\n        localStorage.removeItem('piskelTool');\n        localStorage.removeItem('piskelFps');\n        localStorage.removeItem('piskelCounter');\n        location.reload();\n      });\n    }\n  }]);\n\n  return Controller;\n}();\n\n\n\n//# sourceURL=webpack:///./src/components/Controller/Controller.js?");

/***/ }),

/***/ "./src/components/View/View.js":
/*!*************************************!*\
  !*** ./src/components/View/View.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return View; });\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar View =\n/*#__PURE__*/\nfunction () {\n  function View() {\n    _classCallCheck(this, View);\n\n    this.canvas = document.querySelector('#canvas');\n    this.ctx = canvas.getContext('2d', {\n      alpha: true\n    });\n    this.canvasAbove = document.querySelector('.canvas--above');\n    this.tools = document.querySelector('.tools__container');\n    this.primaryColor = document.querySelector('.tools__palette--primary');\n    this.secondaryColor = document.querySelector('.tools__palette--secondary');\n    this.swapColor = document.querySelector('.tools__palette--swapper');\n    this.framesList = document.querySelector('.frames__list');\n    this.frameAddBtn = document.querySelector('.frames__btn--add');\n    this.preview = document.querySelector('#preview');\n    this.fps = document.querySelector('#fps');\n    this.fpsValue = this.fps.parentNode.children[0].children[0];\n    this.resBtns = document.querySelector('.canvas-resolutions__list');\n    this.mainColumn = document.querySelector('.column--main');\n    this.penSizes = document.querySelector('.pen-size__list');\n    this.cursor = document.querySelector('.cursor');\n    this.clearSessionBtn = document.querySelector('.session__clear');\n    this.fullscreenBtn = document.querySelector('.animate__fullscreen');\n  }\n\n  _createClass(View, [{\n    key: \"renderFrames\",\n    value: function renderFrames(piskelImg, currentCount) {\n      var len = piskelImg.length;\n\n      for (var i = 0; i < len; i++) {\n        var newFrame = document.createElement('LI');\n        newFrame.innerHTML = \"<canvas class=\\\"frame\\\" data-count=\\\"\".concat(i, \"\\\" width=\\\"100\\\" height=\\\"100\\\" draggable=\\\"true\\\"></canvas><button class=\\\"frame__btn frame__btn--delete tip\\\" data-tooltip=\\\"Delete this frame\\\"><button class=\\\"frame__btn frame__btn--copy tip\\\" data-tooltip=\\\"Copy this frame\\\"><span class=\\\"visually-hidden\\\">Copy this canvas</span></button><span class=\\\"visually-hidden\\\">Delete this canvas</span></button><span class=\\\"frame__number\\\">\").concat(i + 1, \"</span>\"); // prettier-ignore\n\n        newFrame.className = i === +currentCount ? 'frame__item frame__active' : 'frame__item';\n        this.framesList.append(newFrame);\n      }\n    }\n  }, {\n    key: \"setCanvasWrapSize\",\n    value: function setCanvasWrapSize() {\n      var canvasWrapHeight = this.mainColumn.offsetHeight;\n      var canvasWrapWidth = this.mainColumn.offsetWidth;\n      var size = canvasWrapWidth < canvasWrapHeight ? canvasWrapWidth : canvasWrapHeight;\n      this.canvas.parentNode.style.width = \"\".concat(size, \"px\");\n      this.canvas.parentNode.style.height = \"\".concat(size, \"px\");\n    }\n  }, {\n    key: \"highlightTarget\",\n    value: function highlightTarget(target, activeClassName) {\n      var activeElement = document.querySelector(\".\".concat(activeClassName));\n      activeElement.classList.remove(activeClassName);\n      target.classList.add(activeClassName);\n    }\n  }, {\n    key: \"renderFrameActive\",\n    value: function renderFrameActive(i, piskelImg, framesList) {\n      var newFrame = document.createElement('LI');\n      newFrame.className = 'frame__item frame__active';\n      newFrame.innerHTML = \"<canvas class=\\\"frame\\\" data-count=\\\"\".concat(i, \"\\\" width=\\\"100\\\" height=\\\"100\\\" draggable=\\\"true\\\"></canvas><button class=\\\"frame__btn frame__btn--delete tip\\\" data-tooltip=\\\"Delete this frame\\\"><button class=\\\"frame__btn frame__btn--copy tip\\\" data-tooltip=\\\"Copy this frame\\\"><span class=\\\"visually-hidden\\\">Copy this canvas</span></button><span class=\\\"visually-hidden\\\">Delete this canvas</span></button><span class=\\\"frame__number\\\">\").concat(i + 1, \"</span>\");\n      framesList.append(newFrame);\n      piskelImg.push('');\n    }\n  }]);\n\n  return View;\n}();\n\n\n\n//# sourceURL=webpack:///./src/components/View/View.js?");

/***/ }),

/***/ "./src/components/animation/animate.js":
/*!*********************************************!*\
  !*** ./src/components/animation/animate.js ***!
  \*********************************************/
/*! exports provided: animate, animationFullscreen */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"animate\", function() { return animate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"animationFullscreen\", function() { return animationFullscreen; });\n/* harmony import */ var _animation_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./animation.scss */ \"./src/components/animation/animation.scss\");\n/* harmony import */ var _animation_scss__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_animation_scss__WEBPACK_IMPORTED_MODULE_0__);\n\n\nfunction animate(draw, fpsInput, fpsDOM, piskelImg) {\n  if (piskelImg.length === 0) return;\n  var start = performance.now();\n  var i = 0;\n  var timeFraction = 0;\n  var prev = timeFraction;\n  var animReqId = requestAnimationFrame(function animate(time) {\n    var fps = localStorage.getItem('piskelFps');\n    var duration;\n    fpsInput.addEventListener('input', function () {\n      fpsDOM.innerText = fpsInput.value;\n      fps = fpsInput.value;\n      localStorage.removeItem('piskelFps');\n      localStorage.setItem('piskelFps', fps);\n\n      if (+fps !== 0) {\n        duration = 1000 / fps;\n        prev = timeFraction;\n        timeFraction = Math.abs(Math.floor((time - start) / duration)); // if (timeFraction !== prev) {\n\n        draw(i); // draw frame\n\n        i++;\n        i %= piskelImg.length; // }\n\n        if (timeFraction >= 0) {\n          cancelAnimationFrame(animReqId - 1);\n          animReqId = requestAnimationFrame(animate);\n        }\n      } else {\n        // cancelAnimationFrame(animReqId);\n        var currentCount = localStorage.getItem('piskelCounter');\n        draw(currentCount);\n      }\n    });\n\n    if (+fps !== 0) {\n      duration = 1000 / fps;\n      prev = timeFraction;\n      timeFraction = Math.abs(Math.floor((time - start) / duration));\n\n      if (timeFraction !== prev) {\n        draw(i); // draw frame\n\n        i++;\n        i %= piskelImg.length;\n      }\n\n      if (timeFraction >= 0) {\n        // cancelAnimationFrame(animReqId);\n        animReqId = requestAnimationFrame(animate);\n      }\n    }\n  });\n}\n\nfunction animationFullscreen(fullscreenBtn, previewCanvas) {\n  fullscreenBtn.addEventListener('click', function (e) {\n    previewCanvas.requestFullscreen();\n  });\n}\n\n\n\n//# sourceURL=webpack:///./src/components/animation/animate.js?");

/***/ }),

/***/ "./src/components/animation/animation.scss":
/*!*************************************************!*\
  !*** ./src/components/animation/animation.scss ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// extracted by mini-css-extract-plugin\n\n//# sourceURL=webpack:///./src/components/animation/animation.scss?");

/***/ }),

/***/ "./src/components/appAction/appAction.js":
/*!***********************************************!*\
  !*** ./src/components/appAction/appAction.js ***!
  \***********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _appAction_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./appAction.scss */ \"./src/components/appAction/appAction.scss\");\n/* harmony import */ var _appAction_scss__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_appAction_scss__WEBPACK_IMPORTED_MODULE_0__);\n\n\n//# sourceURL=webpack:///./src/components/appAction/appAction.js?");

/***/ }),

/***/ "./src/components/appAction/appAction.scss":
/*!*************************************************!*\
  !*** ./src/components/appAction/appAction.scss ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// extracted by mini-css-extract-plugin\n\n//# sourceURL=webpack:///./src/components/appAction/appAction.scss?");

/***/ }),

/***/ "./src/components/drawCanvas/drawCanvas.js":
/*!*************************************************!*\
  !*** ./src/components/drawCanvas/drawCanvas.js ***!
  \*************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _drawCanvas_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./drawCanvas.scss */ \"./src/components/drawCanvas/drawCanvas.scss\");\n/* harmony import */ var _drawCanvas_scss__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_drawCanvas_scss__WEBPACK_IMPORTED_MODULE_0__);\n\n\n//# sourceURL=webpack:///./src/components/drawCanvas/drawCanvas.js?");

/***/ }),

/***/ "./src/components/drawCanvas/drawCanvas.scss":
/*!***************************************************!*\
  !*** ./src/components/drawCanvas/drawCanvas.scss ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// extracted by mini-css-extract-plugin\n\n//# sourceURL=webpack:///./src/components/drawCanvas/drawCanvas.scss?");

/***/ }),

/***/ "./src/components/frames/frame.js":
/*!****************************************!*\
  !*** ./src/components/frames/frame.js ***!
  \****************************************/
/*! exports provided: drawOnCanvas, frameDraw, frameHandler, frameDndHandler, frameAdd, frameDatasetCountSet, frameCopy, frameDel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"drawOnCanvas\", function() { return drawOnCanvas; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"frameDraw\", function() { return frameDraw; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"frameHandler\", function() { return frameHandler; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"frameDndHandler\", function() { return frameDndHandler; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"frameAdd\", function() { return frameAdd; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"frameDatasetCountSet\", function() { return frameDatasetCountSet; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"frameCopy\", function() { return frameCopy; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"frameDel\", function() { return frameDel; });\n/* harmony import */ var _frames_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./frames.scss */ \"./src/components/frames/frames.scss\");\n/* harmony import */ var _frames_scss__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_frames_scss__WEBPACK_IMPORTED_MODULE_0__);\n\n\nfunction drawOnCanvas(canvas, dataURI) {\n  var ctx = canvas.getContext('2d');\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  var img = new Image();\n  if (dataURI === '') return;\n  img.src = dataURI;\n  img.addEventListener('load', function () {\n    return ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n  });\n}\n\nfunction frameDraw(piskelImg, currentCount) {\n  var frame = document.querySelectorAll('.frame');\n  if (piskelImg.length === 0) return;\n  var frameCtx = frame[currentCount].getContext('2d', {\n    alpha: true\n  });\n  var img = new Image();\n  var dataURI = piskelImg[currentCount];\n\n  var frameHandleOnload = function frameHandleOnload(_ref) {\n    var img = _ref.target;\n    var frame = document.querySelectorAll('.frame');\n    var _ref2 = [frame[currentCount].width, frame[currentCount].height],\n        currentWidth = _ref2[0],\n        currentHeight = _ref2[1];\n    currentWidth = frame[currentCount].width;\n    currentHeight = frame[currentCount].height;\n    var frameCtx = frame[currentCount].getContext('2d', {\n      alpha: true\n    });\n    frameCtx.drawImage(img, 0, 0, currentWidth, currentHeight);\n  };\n\n  if (dataURI === null || dataURI === '') {\n    frameCtx.clearRect(0, 0, frame[currentCount].width, frame[currentCount].height);\n  } else {\n    img.src = piskelImg[currentCount];\n    img.addEventListener('load', function () {\n      return frameHandleOnload({\n        target: img\n      }, currentCount);\n    });\n  }\n}\n\nfunction frameHandler(e, canvas, piskelImg, drawOnCanvas, preview, fps) {\n  // highlighting current frame\n  if (e.target.classList.contains('frame')) {\n    var frameActive = document.querySelector('.frame__active');\n    frameActive.classList.remove('frame__active');\n    e.target.parentNode.classList.add('frame__active');\n  }\n\n  var count = event.target.dataset.count;\n\n  if (piskelImg[count] !== undefined) {\n    drawOnCanvas(canvas, piskelImg[count]);\n    if (+fps === 0) drawOnCanvas(preview, piskelImg[count]);\n  }\n\n  return count;\n}\n\nfunction frameDndHandler(canvas, piskelImg, frameDatasetCountSet, drawOnCanvas) {\n  var dragged;\n  document.addEventListener('dragstart', function (e) {\n    dragged = e.target; // store a ref. on the dragged elem\n\n    if (e.target.className.includes('frame')) {\n      dragged = e.target.parentNode;\n      dragged.style.opacity = 0.3; // make darker dragged frame\n    }\n  }); // back dragged canvas opacity to 1 (by removing this style)\n\n  document.addEventListener('dragend', function (e) {\n    dragged.style.opacity = '';\n    e.target.style.border = '';\n    localStorage.removeItem('piskelImg');\n    localStorage.setItem('piskelImg', JSON.stringify(piskelImg));\n  }); // events fired on the drop targets. Prevent default to allow drop\n\n  document.addEventListener('dragover', function (e) {\n    if (e.target.className === 'frame__item') {\n      e.target.style.border = '3px dotted rgb(34, 192, 153)';\n    }\n\n    e.preventDefault();\n  });\n  document.addEventListener('dragenter', function (e) {\n    // console.log(e.target);\n    // highlight potential drop target when the draggable element enters it\n    if (e.target.className === 'frame__item') {\n      e.target.style.border = '3px dotted rgb(34, 192, 153)';\n    }\n  });\n  document.addEventListener('dragleave', function (e) {\n    // reset background of potential drop target when the draggable element leaves it\n    if (e.target.className === 'frame__item') {// e.target.style.border = '';\n      // console.log('dragleave');\n    }\n  });\n  document.addEventListener('drop', function (e) {\n    // prettier-ignore\n    if (e.target.className === 'frame' && e.target.parentNode !== dragged) {\n      // main drag and drop logic\n      var targetNumb = e.target.dataset.count;\n      var sourceNumb = dragged.children[0].dataset.count;\n      e.target.parentNode.style.border = '';\n      dragged.remove();\n\n      if (targetNumb > sourceNumb) {\n        e.target.parentNode.after(dragged);\n      } else {\n        e.target.parentNode.before(dragged);\n      } // highlight dragged frame\n\n\n      var frameActive = document.querySelector('.frame__active');\n      frameActive.classList.remove('frame__active');\n      dragged.classList.add('frame__active');\n      dragged.style.border = ''; // get image from Local Storage if exists\n\n      if (localStorage.getItem(\"piskelImg\") !== null) {\n        // replace dragged frame in target place\n        var removed = piskelImg.splice(sourceNumb, 1);\n        piskelImg.splice(targetNumb, 0, removed); // draw in main canvas target frame, that will be active after drag and drop\n\n        drawOnCanvas(canvas, piskelImg[targetNumb]); // make dataset.count and visual count text of frames consecutive          \n\n        frameDatasetCountSet();\n        localStorage.removeItem('piskelCounter');\n        localStorage.setItem('piskelCounter', targetNumb);\n      }\n    }\n  });\n}\n\nfunction frameAdd(renderFrameActive, framesList, canvas, piskelImg) {\n  var ctx = canvas.getContext('2d', {\n    alpha: true\n  });\n  var len = framesList.children.length;\n  var frameActive = document.querySelector('.frame__active');\n  frameActive.classList.remove('frame__active');\n  renderFrameActive(len, piskelImg, framesList);\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  localStorage.removeItem(\"piskelImg\");\n  localStorage.setItem('piskelImg', JSON.stringify(piskelImg));\n  localStorage.removeItem('piskelCounter');\n  localStorage.setItem('piskelCounter', len);\n}\n\nfunction frameCopy(target, piskelImg, canvas, highlightTarget, frameDatasetCountSet, drawOnCanvas) {\n  // get the count of copied frame\n  var countFrom = +target.parentNode.children[0].dataset.count; // render new  frame right after copied frame\n\n  var newFrame = document.createElement('LI');\n  newFrame.className = 'frame__item';\n  newFrame.innerHTML = \"<canvas class=\\\"frame\\\" data-count=\\\"\".concat(countFrom + 1, \"\\\" width=\\\"100\\\" height=\\\"100\\\" draggable=\\\"true\\\"></canvas><button class=\\\"frame__btn frame__btn--delete tip\\\" data-tooltip=\\\"Delete this frame\\\"><button class=\\\"frame__btn frame__btn--copy tip\\\" data-tooltip=\\\"Copy this frame\\\"><span class=\\\"visually-hidden\\\">Copy this canvas</span></button><span class=\\\"visually-hidden\\\">Delete this canvas</span></button><span class=\\\"frame__number\\\">\").concat(countFrom + 2, \"</span>\");\n  target.parentNode.after(newFrame); // highlightTarget new frame and set it as active\n\n  highlightTarget(newFrame, 'frame__active'); // set dataset.count and visual count text of frames consecutive\n\n  frameDatasetCountSet(); // draw on main canvas this.piskelImg[countFrom]\n\n  drawOnCanvas(newFrame.children[0], piskelImg[countFrom]); // splice piskelImg to add new frame in frame appropriate place\n\n  piskelImg.splice(countFrom, 0, piskelImg[countFrom]); // clear main canvas and draw current active frame\n\n  drawOnCanvas(canvas, piskelImg[countFrom]); // return new currentCount\n\n  return countFrom + 1;\n}\n\nfunction frameDel(target, piskelImg, canvas, framesList) {\n  if (framesList.children.length === 1) return;\n  console.log('delete');\n  var count = target.parentNode.children[0].dataset.count;\n  console.log('номер удаляемого фрейма: ', count); // remove LI of deleted frame and all of it's children\n\n  target.parentNode.remove(); // remove correspond img data in piskelImg array and refresh localStorage\n\n  piskelImg.splice(count, 1);\n  localStorage.removeItem(\"piskelImg\");\n  localStorage.setItem(\"piskelImg\", JSON.stringify(piskelImg)); // refresh frames count\n\n  frameDatasetCountSet(); //set active frame if it was deleted\n\n  var frameActive = document.querySelector('.frame__active');\n\n  if (frameActive === null) {\n    drawOnCanvas(canvas, piskelImg[0]);\n    framesList.children[0].classList.add('frame__active');\n    localStorage.removeItem('piskelCounter');\n    localStorage.setItem('piskelCounter', 0);\n    count = 1;\n  } else {\n    count = localStorage.getItem('piskelCounter');\n    localStorage.removeItem('piskelCounter');\n    localStorage.setItem('piskelCounter', count - 1);\n  }\n\n  return count - 1;\n} // make dataset.count and visual count text of frames consecutive\n\n\nfunction frameDatasetCountSet() {\n  var framesList = document.querySelector('.frames__list');\n  var len = framesList.children.length;\n\n  for (var i = 0; i < len; i++) {\n    framesList.children[i].children[0].dataset.count = i;\n    framesList.children[i].lastChild.innerText = i + 1;\n  }\n}\n\n\n\n//# sourceURL=webpack:///./src/components/frames/frame.js?");

/***/ }),

/***/ "./src/components/frames/frames.scss":
/*!*******************************************!*\
  !*** ./src/components/frames/frames.scss ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// extracted by mini-css-extract-plugin\n\n//# sourceURL=webpack:///./src/components/frames/frames.scss?");

/***/ }),

/***/ "./src/components/tools/Tools.js":
/*!***************************************!*\
  !*** ./src/components/tools/Tools.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Tools; });\n/* harmony import */ var _tools_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tools.scss */ \"./src/components/tools/tools.scss\");\n/* harmony import */ var _tools_scss__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_tools_scss__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils */ \"./src/components/utils.js\");\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\nvar Tools =\n/*#__PURE__*/\nfunction () {\n  function Tools(canvas, _ctx, _currentColor, size) {\n    var _this = this;\n\n    _classCallCheck(this, Tools);\n\n    _defineProperty(this, \"bresenham\", function (x1, x2, y1, y2, ctx) {\n      var innerX1 = x1,\n          innerY1 = y1;\n      var innerX2 = x2,\n          innerY2 = y2;\n      if (!_this.isDrawing) return;\n      _this.isDrawing = true;\n      var deltaX = Math.abs(x2 - x1);\n      var deltaY = Math.abs(y2 - y1);\n      var signX = x1 < x2 ? 1 : -1;\n      var signY = y1 < y2 ? 1 : -1;\n      var err = deltaX - deltaY;\n\n      _this.plot(innerX2, innerY2, ctx);\n\n      while (innerX1 !== innerX2 || innerY1 !== innerY2) {\n        _this.plot(innerX1, innerY1, ctx);\n\n        var err2 = err * 2;\n\n        if (err2 > -deltaY) {\n          err -= deltaY;\n          innerX1 += signX;\n        }\n\n        if (err2 < deltaX) {\n          err += deltaX;\n          innerY1 += signY;\n        }\n      }\n    });\n\n    _defineProperty(this, \"draw\", function (e) {\n      if (_this.isDrawing) {\n        var _this$getXYCoors = _this.getXYCoors(e);\n\n        var _this$getXYCoors2 = _slicedToArray(_this$getXYCoors, 2);\n\n        _this.x2 = _this$getXYCoors2[0];\n        _this.y2 = _this$getXYCoors2[1];\n\n        _this.bresenham(_this.x1, _this.x2, _this.y1, _this.y2, _this.ctx);\n\n        var _ref = [_this.x2, _this.y2];\n        _this.x1 = _ref[0];\n        _this.y1 = _ref[1];\n      }\n    });\n\n    _defineProperty(this, \"drawOnMouseDown\", function (e) {\n      _this.isDrawing = true;\n\n      var _this$getXYCoors3 = _this.getXYCoors(e);\n\n      var _this$getXYCoors4 = _slicedToArray(_this$getXYCoors3, 2);\n\n      _this.x1 = _this$getXYCoors4[0];\n      _this.y1 = _this$getXYCoors4[1];\n\n      _this.plot(_this.x1, _this.y1, _this.ctx);\n    });\n\n    _defineProperty(this, \"drawMouseUp\", function (e) {\n      var _this$getXYCoors5 = _this.getXYCoors(e);\n\n      var _this$getXYCoors6 = _slicedToArray(_this$getXYCoors5, 2);\n\n      _this.x2 = _this$getXYCoors6[0];\n      _this.y2 = _this$getXYCoors6[1];\n\n      _this.bresenham(_this.x1, _this.x2, _this.y1, _this.y2, _this.ctx);\n\n      _this.isDrawing = false;\n    });\n\n    _defineProperty(this, \"floodFill\", function (e) {\n      var _this$getXYCoors7 = _this.getXYCoors(e),\n          _this$getXYCoors8 = _slicedToArray(_this$getXYCoors7, 2),\n          x = _this$getXYCoors8[0],\n          y = _this$getXYCoors8[1];\n\n      var targetColor = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"RGBToHex\"])(_this.ctx.getImageData(x, y, 1, 1).data);\n      var replacementColor = _this.currentColor.value;\n      if (targetColor === replacementColor) return;\n      _this.ctx.fillStyle = replacementColor;\n\n      _this.ctx.fillRect(x, y, 1, 1);\n\n      var queue = [];\n      queue.push([x, y]);\n\n      while (queue.length > 0) {\n        if (x + 1 > 0 && x + 1 < _this.canvas.width && targetColor === Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"RGBToHex\"])(_this.ctx.getImageData(x + 1, y, 1, 1).data)) {\n          queue.push([x + 1, y]);\n\n          _this.ctx.fillRect(x + 1, y, 1, 1);\n        }\n\n        if (x - 1 >= 0 && x - 1 < _this.canvas.width && targetColor === Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"RGBToHex\"])(_this.ctx.getImageData(x - 1, y, 1, 1).data)) {\n          queue.push([x - 1, y]);\n\n          _this.ctx.fillRect(x - 1, y, 1, 1);\n        }\n\n        if (y + 1 > 0 && y + 1 < _this.canvas.width && targetColor === Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"RGBToHex\"])(_this.ctx.getImageData(x, y + 1, 1, 1).data)) {\n          queue.push([x, y + 1]);\n\n          _this.ctx.fillRect(x, y + 1, 1, 1);\n        }\n\n        if (y - 1 >= 0 && y - 1 < _this.canvas.width && targetColor === Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"RGBToHex\"])(_this.ctx.getImageData(x, y - 1, 1, 1).data)) {\n          queue.push([x, y - 1]);\n\n          _this.ctx.fillRect(x, y - 1, 1, 1);\n        }\n\n        queue.shift(0);\n\n        if (queue.length > 0) {\n          var _ref2 = [queue[0][0], queue[0][1]];\n          x = _ref2[0];\n          y = _ref2[1];\n        }\n      }\n\n      queue = [];\n    });\n\n    _defineProperty(this, \"floodFillSamePixel\", function (e) {\n      var _this$getXYCoors9 = _this.getXYCoors(e),\n          _this$getXYCoors10 = _slicedToArray(_this$getXYCoors9, 2),\n          x = _this$getXYCoors10[0],\n          y = _this$getXYCoors10[1];\n\n      var prevColor = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"RGBToHex\"])(_this.ctx.getImageData(x, y, 1, 1).data);\n      _this.ctx.fillStyle = _this.currentColor.value;\n\n      for (var _x = 0; _x < _this.canvas.width; _x++) {\n        for (var _y = 0; _y < _this.canvas.height; _y++) {\n          var currentColor = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"RGBToHex\"])(_this.ctx.getImageData(_x, _y, 1, 1).data);\n          if (currentColor === prevColor) _this.ctx.fillRect(_x, _y, 1, 1);\n        }\n      }\n    });\n\n    _defineProperty(this, \"colorPicker\", function (e) {\n      var _this$getXYCoors11 = _this.getXYCoors(e),\n          _this$getXYCoors12 = _slicedToArray(_this$getXYCoors11, 2),\n          x = _this$getXYCoors12[0],\n          y = _this$getXYCoors12[1];\n\n      var choosedColor = _this.ctx.getImageData(x, y, 1, 1);\n\n      var color = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"RGBToHex\"])(choosedColor.data);\n      _this.ctx.fillStyle = color;\n      _this.currentColor.value = color;\n    });\n\n    _defineProperty(this, \"toolHandler\", function (targetTool, frameDraw) {\n      _this.pencilTool(targetTool);\n\n      _this.bucketTool(targetTool);\n\n      _this.pickerTool(targetTool);\n\n      _this.strokeTool(targetTool, frameDraw);\n\n      _this.bucketSamePixelTool(targetTool);\n\n      localStorage.removeItem('piskelTool');\n      localStorage.setItem('piskelTool', targetTool);\n    });\n\n    this.canvas = canvas;\n    this.ctx = _ctx;\n    this.isDrawing = false;\n    this.currentColor = _currentColor;\n    this.size = size;\n    this.isEraser = false;\n\n    if (canvas == null) {\n      throw new Error('there is no canvas');\n    }\n  }\n\n  _createClass(Tools, [{\n    key: \"plot\",\n    value: function plot(x, y, ctx) {\n      var penSize = localStorage.getItem('piskelPenSize') !== null ? +localStorage.getItem('piskelPenSize') : 1;\n      var pixelSize = localStorage.getItem('piskelPixelSize') !== null ? +localStorage.getItem('piskelPixelSize') : 1;\n      ctx.fillStyle = this.currentColor.value;\n      x = Math.round(x / pixelSize) * pixelSize;\n      y = Math.round(y / pixelSize) * pixelSize;\n      var delta = Math.floor(penSize * pixelSize / 2);\n\n      if (this.isEraser) {\n        ctx.clearRect(x - delta, y - delta, penSize * pixelSize, penSize * pixelSize);\n      } else {\n        ctx.fillRect(x - delta, y - delta, penSize * pixelSize, penSize * pixelSize);\n      }\n    } // Bresenham algorithm\n\n  }, {\n    key: \"getXYCoors\",\n    value: function getXYCoors(e) {\n      var canvasWidth = canvas.parentNode.style.width.slice(0, -2);\n      return [Math.round(e.offsetX / canvasWidth * this.canvas.width), Math.round(e.offsetY / canvasWidth * this.canvas.width)];\n    }\n  }, {\n    key: \"pencilTool\",\n    value: function pencilTool(targetTool) {\n      var _this2 = this;\n\n      if (targetTool === 'pencil' || targetTool === 'eraser') {\n        this.isEraser = targetTool === 'eraser' ? true : false;\n        this.canvas.addEventListener('mousemove', this.draw);\n        this.canvas.addEventListener('mousedown', this.drawOnMouseDown);\n        this.canvas.addEventListener('mouseup', this.drawMouseUp);\n        this.canvas.addEventListener('mouseout', function () {\n          _this2.isDrawing = false;\n        });\n      } else {\n        this.isEraser = false;\n        this.canvas.removeEventListener('mousemove', this.draw);\n        this.canvas.removeEventListener('mousedown', this.drawOnMouseDown);\n        this.canvas.removeEventListener('mouseup', this.drawMouseUp);\n      }\n    }\n  }, {\n    key: \"bucketTool\",\n    value: function bucketTool(targetTool) {\n      if (targetTool === 'bucket') {\n        this.canvas.addEventListener('mousedown', this.floodFill);\n      } else {\n        this.canvas.removeEventListener('mousedown', this.floodFill);\n      }\n    }\n  }, {\n    key: \"bucketSamePixelTool\",\n    value: function bucketSamePixelTool(targetTool) {\n      if (targetTool === 'bucketSamePixel') {\n        this.canvas.addEventListener('mousedown', this.floodFillSamePixel);\n      } else {\n        this.canvas.removeEventListener('mousedown', this.floodFillSamePixel);\n      }\n    }\n  }, {\n    key: \"pickerTool\",\n    value: function pickerTool(targetTool) {\n      if (targetTool === 'picker') {\n        this.canvas.addEventListener('click', this.colorPicker);\n      } else {\n        this.canvas.removeEventListener('click', this.colorPicker);\n      }\n    }\n  }, {\n    key: \"strokeTool\",\n    value: function strokeTool(targetTool, frameDraw) {\n      var _this3 = this;\n\n      var canvasAbove = document.querySelector('.canvas--above');\n      var ctxAbove = canvasAbove.getContext('2d');\n      ctxAbove.imageSmoothingEnabled = false;\n\n      if (targetTool === 'stroke') {\n        canvasAbove.style.display = 'block';\n        this.isDrawing = false;\n        var x1, y1;\n        var x0, y0;\n        canvasAbove.addEventListener('mousedown', function (e) {\n          _this3.isDrawing = true;\n\n          var _this3$getXYCoors = _this3.getXYCoors(e);\n\n          var _this3$getXYCoors2 = _slicedToArray(_this3$getXYCoors, 2);\n\n          x0 = _this3$getXYCoors2[0];\n          y0 = _this3$getXYCoors2[1];\n        });\n        canvasAbove.addEventListener('mousemove', function (e) {\n          if (_this3.isDrawing) {\n            var _this3$getXYCoors3 = _this3.getXYCoors(e);\n\n            var _this3$getXYCoors4 = _slicedToArray(_this3$getXYCoors3, 2);\n\n            x1 = _this3$getXYCoors4[0];\n            y1 = _this3$getXYCoors4[1];\n            ctxAbove.clearRect(0, 0, canvasAbove.width, canvasAbove.height);\n\n            _this3.bresenham(x0, x1, y0, y1, ctxAbove);\n          }\n        });\n        canvasAbove.addEventListener('mouseup', function (e) {\n          var _this3$getXYCoors5 = _this3.getXYCoors(e);\n\n          var _this3$getXYCoors6 = _slicedToArray(_this3$getXYCoors5, 2);\n\n          x1 = _this3$getXYCoors6[0];\n          y1 = _this3$getXYCoors6[1];\n          ctxAbove.clearRect(0, 0, canvasAbove.width, canvasAbove.height);\n\n          _this3.bresenham(x0, x1, y0, y1, _this3.ctx);\n\n          _this3.isDrawing = false;\n\n          var dataURI = _this3.canvas.toDataURL();\n\n          var piskelImg = JSON.parse(localStorage.getItem('piskelImg'));\n          var currentCount = localStorage.getItem('piskelCounter');\n          piskelImg[currentCount] = dataURI;\n          localStorage.removeItem('piskelImg');\n          localStorage.setItem('piskelImg', JSON.stringify(piskelImg));\n          frameDraw(piskelImg, currentCount);\n        });\n      } else {\n        canvasAbove.style.display = '';\n      }\n    }\n  }, {\n    key: \"clearCanvas\",\n    value: function clearCanvas(piskelImg, currentCount) {\n      this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n      piskelImg[currentCount] = '';\n      localStorage.removeItem(\"piskelImg\");\n      localStorage.setItem('piskelImg', JSON.stringify(piskelImg));\n    } // downloadImage(url) {\n    //   const img = new Image();\n    //   img.crossOrigin = 'Anonymous';\n    //   img.src = url;\n    //   let [currentWidth, currentHeight] = [this.canvas.width, this.canvas.height];\n    //   let [x, y] = [0, 0];\n    //   img.addEventListener('load', () => {\n    //     if (img.naturalWidth > img.naturalHeight) {\n    //       const scaleImg = img.naturalWidth / this.canvas.width;\n    //       currentWidth = this.canvas.width;\n    //       currentHeight = img.naturalHeight / scaleImg;\n    //       x = 0;\n    //       y = (this.canvas.height - currentHeight) / 2;\n    //     } else if (img.naturalWidth === img.naturalHeight) {\n    //       currentWidth = this.canvas.width;\n    //       currentHeight = this.canvas.height;\n    //     } else {\n    //       const scaleImg = img.naturalHeight / this.canvas.height;\n    //       currentWidth = img.naturalWidth / scaleImg;\n    //       currentHeight = this.canvas.height;\n    //       x = (this.canvas.width - currentWidth) / 2;\n    //       y = 0;\n    //     }\n    //     this.ctx.imageSmoothingEnabled = false;\n    //     this.ctx.drawImage(img, x, y, currentWidth, currentHeight);\n    //     this.saveInLocalStorage('piskelImg');\n    //   });\n    // }\n    // saveCanvas() {\n    //   // create an \"off-screen\" anchor tag\n    //   const lnk = document.createElement('a');\n    //   // the key here is to set the download attribute of the a tag\n    //   // convert canvas content to data-uri for link.\n    //   lnk.setAttribute('href', this.canvas.toDataURL('image/png;base64'));\n    //   lnk.setAttribute('download', 'myimage.png');\n    //   lnk.style.display = 'none';\n    //   document.body.appendChild(lnk);\n    //   // When download attribute is set the content pointed to by link\n    //   // will be pushed as \"download\" in HTML5 capable browsers\n    //   lnk.click();\n    //   document.body.removeChild(lnk);\n    // }\n    // grayscale() {\n    //   const imageData = this.ctx.getImageData(0, 0, this.canvas.width, this.canvas.height);\n    //   const { data } = imageData;\n    //   for (let i = 0; i < data.length; i += 4) {\n    //     const avg = (data[i] + data[i + 1] + data[i + 2]) / 3;\n    //     data[i] = avg; // red\n    //     data[i + 1] = avg; // green\n    //     data[i + 2] = avg; // blue\n    //   }\n    //   this.ctx.putImageData(imageData, 0, 0);\n    // }\n    // getLinkToImage(city) {\n    //   const url = `https://api.unsplash.com/photos/random?query=town,${city}&client_id=e2077ad31a806c894c460aec8f81bc2af4d09c4f8104ae3177bb809faf0eac17`;\n    //   fetch(url)\n    //     .then(res => res.json())\n    //     .then(data => {\n    //       this.downloadImage(data.urls.regular);\n    //     })\n    //     .catch(() => alert('Your limit of 50 images on unsplash.com is end'));\n    // }\n\n  }]);\n\n  return Tools;\n}();\n\n\n\n//# sourceURL=webpack:///./src/components/tools/Tools.js?");

/***/ }),

/***/ "./src/components/tools/tools.scss":
/*!*****************************************!*\
  !*** ./src/components/tools/tools.scss ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// extracted by mini-css-extract-plugin\n\n//# sourceURL=webpack:///./src/components/tools/tools.scss?");

/***/ }),

/***/ "./src/components/tools/toolsMap.js":
/*!******************************************!*\
  !*** ./src/components/tools/toolsMap.js ***!
  \******************************************/
/*! exports provided: toolsMap */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"toolsMap\", function() { return toolsMap; });\nvar toolsMap = new Map([['KeyA', 'bucketSamePixel'], ['KeyB', 'bucket'], ['KeyC', 'picker'], ['KeyE', 'eraser'], ['KeyP', 'pencil'], ['KeyL', 'stroke']]);\n\n\n//# sourceURL=webpack:///./src/components/tools/toolsMap.js?");

/***/ }),

/***/ "./src/components/utils.js":
/*!*********************************!*\
  !*** ./src/components/utils.js ***!
  \*********************************/
/*! exports provided: RGBToHex, saveImgsInLocalStorage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RGBToHex\", function() { return RGBToHex; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"saveImgsInLocalStorage\", function() { return saveImgsInLocalStorage; });\nfunction RGBToHex(data) {\n  var dataHex = '#';\n\n  for (var i = 0; i < 3; i += 1) {\n    var color = data[i];\n    var letter = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\n    var firstLetter = letter[Math.floor(color / 16)];\n    var secondLetter = letter[color % 16];\n    dataHex = dataHex + firstLetter + secondLetter;\n  }\n\n  return dataHex;\n}\n\nfunction saveImgsInLocalStorage(piskelImg, canvas, currentCount) {\n  var dataURI = canvas.toDataURL();\n  piskelImg[currentCount] = dataURI;\n  localStorage.removeItem('piskelImg');\n  localStorage.setItem('piskelImg', JSON.stringify(piskelImg)); // const dataURI = canvas.toDataURL('image/png').replace(/^data:image\\/(png|jpg);base64,/, '');\n  // localStorage.setItem(localStorageKey, dataURI);\n}\n\n\n\n//# sourceURL=webpack:///./src/components/utils.js?");

/***/ }),

/***/ "./src/sass/style.scss":
/*!*****************************!*\
  !*** ./src/sass/style.scss ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// extracted by mini-css-extract-plugin\n\n//# sourceURL=webpack:///./src/sass/style.scss?");

/***/ })

/******/ });