<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dockerfile Network Commands Conspect</title>
    <meta name="description" content="I am writing about my experiences as a naval navel-gazer.">
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/prism-base16-monokai.dark.css">
    <link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="Aynur Shauerman">
    <link rel="alternate" href="/feed/feed.json" type="application/json" title="Aynur Shauerman">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kaisei+HarunoUmi:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="icon" href="/favicon.ico"/>
    <script src="/static/js/alpine.js" defer></script>
  </head>
  <body>
    <header class="container">
  <nav class="header" x-data="{ isOpen: false }" @keydown.escape="isOpen = false" @click.away="isOpen = false">
    <div class="header__title" x-bind:style="isOpen ? 'border-bottom: 2px solid #fff;' : 'border-bottom: none'">
      <button class="header__menu-btn" @click="isOpen = !isOpen" type="button">
        <img src='../../img/icons/align-justify.svg' title="open menu" width="40" height="40" x-show="!isOpen"/>
        <img src='../../img/icons/cross.svg' title="close menu" width="40" height="40" x-show="isOpen"/>
      </button>
      <h1>
        <a class="main-link" href=" /">
          Aynur Shauerman
        </a>
      </h1>
    </div>
    <ul class="nav" x-show="isOpen" x-transition>
        <li>
          <a href="/cv/" title="CV" class="nav-item  ">
              <span class="cv">
                CV
              </span>
            
          </a>
        </li>
        <li>
          <a href="/notes/" title="Notes" class="nav-item  ">
              <img src="../../img/icons/note.png" width="40" height="40" alt="Notes">
              <span class="nav-item__key">
                Notes
              </span>
            
          </a>
        </li>
    </ul>
    <div class="nav nav-resume" x-show="isOpen" x-transition>
          <a href="/youtube" class="nav-item" target="_parent">
            <img width="40" height="40" src="../../img/icons/youtube.svg" alt="youtube"/>
          </a>
          <a href="https://www.linkedin.com/in/ainur-shauerman/" class="nav-item" target="_blank">
            <img width="40" height="40" src="../../img/icons/linkedin.svg" alt="Linkedin"/>
          </a>
          <a href="https://novosibirsk.hh.ru/applicant/resumes/view?resume=5f4f9b0fff07d6f7440039ed1f7476456e5a50" class="nav-item" target="_blank">
            <img width="40" height="40" src="../../img/icons/hh.svg" alt="HH"/>
          </a>
          <a href="https://career.habr.com/aykuli" class="nav-item" target="_blank">
            <img width="40" height="40" src="../../img/icons/habr.png" alt="Habr"/>
          </a>
      
    </div>
  </nav>

  <nav class="header__big">
    <ul class="nav__big">
      <li class="nav__big--item">
        <h1>
          <a class="main-link" href=" /">
            <img src="../../img/icons/home.svg" width="30" height="30" alt="home">

          </a>
        </h1>
      </li>
        <li class="nav__big--item ">
          <a href="/cv/" title="CV">
              <span class="cv cv__big">
                CV
              </span>
            
          </a>
        </li>
        <li class="nav__big--item ">
          <a href="/notes/" title="Notes">
              <img src="../../img/icons/note.png" width="30" height="30" alt="Notes">
            
          </a>
        </li>
    </ul>
    <ul class="nav__big nav-resume">
        <li class="nav__big--item ">
          <a href="/youtube" target="_parent">
            <img width="30" height="30" src="../../img/icons/youtube.svg" alt="youtube"/>
          </a>
          </li>
        <li class="nav__big--item ">
          <a href="https://www.linkedin.com/in/ainur-shauerman/" target="_blank">
            <img width="30" height="30" src="../../img/icons/linkedin.svg" alt="Linkedin"/>
          </a>
          </li>
        <li class="nav__big--item ">
          <a href="https://novosibirsk.hh.ru/applicant/resumes/view?resume=5f4f9b0fff07d6f7440039ed1f7476456e5a50" target="_blank">
            <img width="30" height="30" src="../../img/icons/hh.svg" alt="HH"/>
          </a>
          </li>
        <li class="nav__big--item ">
          <a href="https://career.habr.com/aykuli" target="_blank">
            <img width="30" height="30" src="../../img/icons/habr.png" alt="Habr"/>
          </a>
          </li>
      
    </div>
  </nav>
</header>
    <main class="container" >
  
<div class="note__crumbs"> 
  <a href='/notes'>Notes</a>
  <p>&nbsp / &nbsp Dockerfile Network Commands Conspect</p>
</div>

<h2 class="note__title">Dockerfile Network Commands Conspect</h2>

<time class="note__time" datetime="2022-03-15">15 Mar 2022</time>
<div class="note__tags"><a href="/tags/docker/" class="post__tag">docker</a>
</div>
<div class="note-md">
  <h3 id="network-drivers" tabindex="-1">Network drivers <a class="direct-link" href="#network-drivers" aria-hidden="true">#</a></h3>
<p><code>bridge</code> - isolated network between containers. Works only in one host.</p>
<p><code>host</code> - remove network isolation between the container</p>
<p><code>overlay</code> - Docker swarm</p>
<p><code>macvlan</code> - unique MAC address from container</p>
<p><code>null</code> - container without network</p>
<h3 id="commands" tabindex="-1">Commands <a class="direct-link" href="#commands" aria-hidden="true">#</a></h3>
<pre><code>connect
create
diconnect
inspect
ls
rm
prune
</code></pre>
<h4 id="examples" tabindex="-1">Examples <a class="direct-link" href="#examples" aria-hidden="true">#</a></h4>
<pre class="language-bash"><code class="language-bash"><span class="token function">docker</span> network <span class="token function">ls</span></code></pre>
<details style="padding-bottom:10px;margin-bottom: 40px;border-bottom: 1px solid #DDD">
<summary>Result</summary>
<pre style="background-color: #DDD">
NETWORK ID     NAME          DRIVER    SCOPE
8177523a8087   ayn-network   bridge    local
19588a186fed   bridge        bridge    local
5450493e59b7   host          host      local
fa699046eb10   none          null      local
</pre>
</details>
<pre><code>docker network inspect bridge
</code></pre>
<details style="padding-bottom:10px;margin-bottom: 40px;border-bottom: 1px solid #DDD">
<summary>Result</summary>
<pre style="background-color: #DDD">
[
    {
        "Name": "bridge",
        "Id": "19588a186fed23412c698e7bd0fc8cc7b97bc8f3b2123784fe6d30845c3784d9",
        "Created": "2022-03-15T15:01:03.274362572Z",
        "Scope": "local",
        "Driver": "bridge",
        "EnableIPv6": false,
        "IPAM": {
            "Driver": "default",
            "Options": null,
            "Config": [
                {
                    "Subnet": "172.17.0.0/16",
                    "Gateway": "172.17.0.1"
                }
            ]
        },
        "Internal": false,
        "Attachable": false,
        "Ingress": false,
        "ConfigFrom": {
            "Network": ""
        },
        "ConfigOnly": false,
        <div style="background-color: #FCC">
        "Containers": {
            "480849852ab9df8156166f5e821e6f2a72195abffc9809dd0958167cc71779ff": {
                "Name": "node1",
                "EndpointID": "7e76de9eda40652eea458cbbbde534b413de5da354b96e3d2d8199eccea31e4c",
                "MacAddress": "02:42:ac:11:00:03",
                "IPv4Address": "172.17.0.3/16",
                "IPv6Address": ""
            },
            "88f61bcb695ca7647916b07f5dc6bbaaec51e0181e11cada99cdf8c0912bcbb5": {
                "Name": "stupefied_chatterjee",
                "EndpointID": "8b71507e712adda9d535187e82b488df3d9731bab87cd61a56365752434e70a0",
                "MacAddress": "02:42:ac:11:00:02",
                "IPv4Address": "172.17.0.2/16",
                "IPv6Address": ""
            },
            "abde5f3677d0b97987ab265c5de6b35b3be2db79a0cd10c612f98b30c8971641": {
                "Name": "node2",
                "EndpointID": "6a5cae843b651c20b8cfe83b6d6c8b78b830d85c14e114502496a05960e68e74",
                "MacAddress": "02:42:ac:11:00:04",
                "IPv4Address": "172.17.0.4/16",
                "IPv6Address": ""
            },
            "ed6a0c472ad8c00b33cfec7de1775fd8c7bfaec1fdfa3241aab5f155397d01b2": {
                "Name": "node3",
                "EndpointID": "31e2b0ac774eda44afbc82f772dbcb6cbbd6ac12742f79271898f9c6ac7dc5bf",
                "MacAddress": "02:42:ac:11:00:05",
                "IPv4Address": "172.17.0.5/16",
                "IPv6Address": ""
            }
        },
        </div>
        "Options": {
            "com.docker.network.bridge.default_bridge": "true",
            "com.docker.network.bridge.enable_icc": "true",
            "com.docker.network.bridge.enable_ip_masquerade": "true",
            "com.docker.network.bridge.host_binding_ipv4": "0.0.0.0",
            "com.docker.network.bridge.name": "docker0",
            "com.docker.network.driver.mtu": "1500"
        },
        "Labels": {}
    }
]
</pre>
</details>
<pre><code>docker create ayn-network
docker network ls
</code></pre>
<details style="padding-bottom:10px;margin-bottom: 40px;border-bottom: 1px solid #DDD">
<summary>Result</summary>
<pre style="background-color: #DDD">
NETWORK ID     NAME          DRIVER    SCOPE
8177523a8087   ayn-network   bridge    local
19588a186fed   bridge        bridge    local
5450493e59b7   host          host      local
fa699046eb10   none          null      local
</pre>
</details>
<pre><code>docker connect ayn-network node1
docker connect ayn-network node2
docker network inspect
</code></pre>
<details style="padding-bottom:10px;margin-bottom: 40px;border-bottom: 1px solid #DDD">
<summary>Result</summary>
<pre style="background-color: #DDD">
[
    {
        "Name": "ayn-network",
        "Id": "8177523a808757893a0f240da2c3ab78f77ea16d166f41687627c893eb4f10ce",
        "Created": "2022-03-15T15:54:47.29301923Z",
        "Scope": "local",
        "Driver": "bridge",
        "EnableIPv6": false,
        "IPAM": {
            "Driver": "default",
            "Options": {},
            "Config": [
                {
                    "Subnet": "172.18.0.0/16",
                    "Gateway": "172.18.0.1"
                }
            ]
        },
        "Internal": false,
        "Attachable": false,
        "Ingress": false,
        "ConfigFrom": {
            "Network": ""
        },
        "ConfigOnly": false,
        <div style="background-color: #FCC">
        "Containers": {
            "480849852ab9df8156166f5e821e6f2a72195abffc9809dd0958167cc71779ff": {
                "Name": "node1",
                "EndpointID": "e0750851f2ed267ae5bf8ad20c236d6165e7f58ed85f7b58b2518b66bc2e5fd5",
                "MacAddress": "02:42:ac:12:00:02",
                "IPv4Address": "172.18.0.2/16",
                "IPv6Address": ""
            },
            "abde5f3677d0b97987ab265c5de6b35b3be2db79a0cd10c612f98b30c8971641": {
                "Name": "node2",
                "EndpointID": "dae5e0b3b0995f830a4f837e3431b929ba9c267eb604be2bd05ea238285d9396",
                "MacAddress": "02:42:ac:12:00:03",
                "IPv4Address": "172.18.0.3/16",
                "IPv6Address": ""
            }
        },
        </div>
        "Options": {},
        "Labels": {}
    }
]
</pre>
</details>
<pre><code>docker run --name=node3 --network ayn-network -p 3001:3000 -d demo:latest
curl localhost:3001
</code></pre>
<p>This container exits in <code>ayn-network</code> only and doesn't exist in <code>bridge</code>. Port 3001 on host shows port 3000 of container with name node3</p>
<details style="padding-bottom:10px;margin-bottom: 40px;border-bottom: 1px solid #DDD">
<summary>Result</summary>
<pre style="background-color: #DDD">
{"eth0":["172.18.0.5"]}
</pre>
</details>

</div>

<div class="note__pagination">
  <div>
  </div>
  <div>
      <a href="/posts/2022-03-14-how-to-delete-line-in-nano-editor/">
        Delete Line in Nano Editor
        <span class="note__pagination-arrow--left">
          >
        </span>
      </a>
    
  </div>
</div>

</main>
    
  </body>
</html>